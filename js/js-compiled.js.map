{"version":3,"sources":["js.js"],"names":[],"mappings":"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","file":"js-compiled.js","sourcesContent":["'use strict';\r\n\r\n\r\n\r\n\r\n\r\n$(document).ready(function () {\r\n    /*owl carusel*/\r\n    (function () {\r\n        var $sliderSimple = $('[data-role=\"slider\"]');\r\n\r\n        $sliderSimple.owlCarousel({\r\n            items: 1,\r\n            autoplay: false,\r\n            autoplayTimeout: 4000,\r\n            navigation: true, // Show next and prev buttons\r\n            slideSpeed: 300,\r\n            paginationSpeed: 300,\r\n            nav: true,\r\n            dots: false,\r\n            dotsEach: true,\r\n            navText: false,\r\n            loop: true,\r\n            autoWidth: false,\r\n            responsive: false,\r\n            itemsScaleUp: false,\r\n            onTranslated: function () {\r\n                playVideo($('.owl-loaded .owl-item.active'));\r\n            }\r\n        });\r\n\r\n        function playVideo (parent) {\r\n            var $video = $(parent).find('video');\r\n\r\n            if (!$video.length) return;\r\n\r\n            //console.log($video);\r\n            var timer = setTimeout(function () {\r\n                $video.each(function () {\r\n                    //console.log(this);\r\n                    this.play();\r\n                });\r\n            }, 1000);\r\n        }\r\n\r\n        /*$(\"#owl1\").owlCarousel({\r\n            items: 1,\r\n            autoplay: false,\r\n            autoplayTimeout: 4000,\r\n            navigation: true, // Show next and prev buttons\r\n            slideSpeed: 300,\r\n            paginationSpeed: 300,\r\n            nav: true,\r\n            dots: true,\r\n            dotsEach: true,\r\n            navText: false,\r\n            loop: true,\r\n            autoWidth: false,\r\n            responsive: false,\r\n            itemsScaleUp: false,\r\n        });\r\n\r\n        $(\"#owl2\").owlCarousel({\r\n            items: 1,\r\n            autoplay: false,\r\n            autoplayTimeout: 4000,\r\n            navigation: true, // Show next and prev buttons\r\n            slideSpeed: 300,\r\n            paginationSpeed: 300,\r\n            nav: true,\r\n            dots: true,\r\n            dotsEach: true,\r\n            navText: false,\r\n            loop: true,\r\n            autoWidth: false,\r\n            responsive: false,\r\n            itemsScaleUp: false,\r\n            onTranslated: function () {\r\n                slide = $('#owl2 .active .item');\r\n                if (!$(slide).hasClass('loaded')) {\r\n\r\n                    $.ajax({\r\n                        method: \"POST\",\r\n                        url: \"js/loadslide.php\",\r\n                        data: {'index': $(slide).data('slide')},\r\n                        success: function (data) {\r\n                            $(slide).html(data).addClass('loaded');\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        });*/\r\n    })();\r\n\r\n    /*Fancybox*/\r\n    (function () {\r\n        var $fancyMenu = $('[data-role=\"lightbox-menu\"]');\r\n        var $fancySimple = $('[data-role=\"lightbox\"]');\r\n        var $fancyVideo = $('[data-role=\"lightbox-video\"]');\r\n        var $fancyTest = $('[data-role=\"lightbox-test\"]');\r\n\r\n        $('.fancybox-modal').fancybox({\r\n            padding: 0,\r\n            margin: [0, 70,0,70],\r\n            fitToView: false,\r\n            tpl: {\r\n                closeBtn: '<span class=\"lightbox-close\"></span>',\r\n                next: '<span class=\"lightbox-next\"></span>',\r\n                prev: '<span class=\"lightbox-prev\"></span>'\r\n            },\r\n            afterLoad: function(current) {\r\n                playVideo(current.href);\r\n            }\r\n        });\r\n\r\n        $fancySimple.fancybox({\r\n            padding: 0,\r\n            margin: [0, 70,0,70],\r\n            fitToView: false,\r\n            tpl: {\r\n                closeBtn: '<span class=\"lightbox-close\"></span>',\r\n                next: '<span class=\"lightbox-next\"></span>',\r\n                prev: '<span class=\"lightbox-prev\"></span>'\r\n            },\r\n            afterLoad: function(current) {\r\n                playVideo(current.href);\r\n            }\r\n        });\r\n\r\n        /*http://jsfiddle.net/x03xqu7t/2/ отключить последнему слайду навигацию*/\r\n        $fancyMenu.fancybox({\r\n            prevEffect\t: 'none',\r\n            nextEffect\t: 'none',\r\n            padding: 0,\r\n            //autoHeight: true,\r\n            fitToView: false,\r\n            loop: false,\r\n            helpers: {\r\n                overlay: {\r\n                    closeClick: true\r\n                }\r\n            },\r\n            tpl: {\r\n                closeBtn: '<span class=\"lightbox-close\"></span>',\r\n                next: '<span class=\"lightbox-next\"></span>',\r\n                prev: '<span class=\"lightbox-prev\"></span>'\r\n            },\r\n            afterLoad: function(current) {\r\n                if (current.index === current.group.length - 1) {\r\n                    current.arrows = false;\r\n                    current.keys.prev = {};\r\n                    current.keys.next = {};\r\n                    current.helpers.overlay.closeClick = false;\r\n                    setTimeout(function () {\r\n                        $('.fancybox-overlay').one('click', closeFancyOnOverlay);\r\n                    }, 2000);\r\n\r\n                    playVideo(current.href);\r\n                    //console.dir(current);\r\n                }\r\n            }\r\n        });\r\n\r\n        $fancyTest.fancybox({\r\n            padding: 0,\r\n            loop: false,\r\n            fitToView: false,\r\n            tpl: {\r\n                closeBtn: '<span class=\"lightbox-close\"></span>',\r\n                next: '<span class=\"lightbox-next\"></span>',\r\n                prev: '<span class=\"lightbox-prev\"></span>'\r\n            },\r\n            afterClose: function() {\r\n                $('#popup__calculate-cost').trigger('resetTest');\r\n                //console.log('test reset triggered');\r\n            }\r\n        });\r\n\r\n        function closeFancyOnOverlay(e) {\r\n            var target = e.target;\r\n\r\n            if (this !== target) return;\r\n\r\n            $.fancybox.close();\r\n        }\r\n\r\n        function playVideo (parent) {\r\n            var $video = $(parent).find('video');\r\n\r\n            if (!$video.length) return;\r\n\r\n            //console.log($video);\r\n            var timer = setTimeout(function () {\r\n                $video.each(function () {\r\n                    //console.log(this);\r\n                    this.play();\r\n                });\r\n            }, 1000);\r\n        }\r\n\r\n        /*youtube fancy change modal on video end*/\r\n        (function () {\r\n            $fancyVideo.fancybox({\r\n                padding: 0,\r\n                loop: false,\r\n                fitToView: false,\r\n                tpl: {\r\n                    closeBtn: '<span class=\"lightbox-close\"></span>',\r\n                    next: '<span class=\"lightbox-next\"></span>',\r\n                    prev: '<span class=\"lightbox-prev\"></span>'\r\n                },\r\n                afterLoad: onLightboxOpen,\r\n                beforeClose: onLightboxClose\r\n            });\r\n\r\n            var player;\r\n\r\n            function onLightboxOpen() {\r\n                if(player) {\r\n                    player.playVideo();\r\n                    return;\r\n                }\r\n\r\n                onYouTubeIframeAPIReady();\r\n            }\r\n\r\n            function onLightboxClose() {\r\n                if (!player) return;\r\n                //console.dir(player);\r\n                //player.stopVideo();\r\n                $('#player').replaceWith('<div id=\"player\"></div>');\r\n                player = null;\r\n                //console.log('closed');\r\n                //console.log($('#player'));\r\n            }\r\n\r\n            function onYouTubeIframeAPIReady() {\r\n                player = new YT.Player('player', {\r\n                    height: '390',\r\n                    width: '640',\r\n                    videoId: 'rOM4c0pDhvg',\r\n                    events: {\r\n                        'onReady': onPlayerReady,\r\n                        'onStateChange': onPlayerStateChange\r\n                    }\r\n                });\r\n\r\n                //console.dir(player);\r\n            }\r\n\r\n            // autoplay video\r\n            function onPlayerReady(event) {\r\n                event.target.playVideo();\r\n            }\r\n\r\n            // when video ends\r\n            function onPlayerStateChange(event) {\r\n                if(event.data === 0) {\r\n                    $.fancybox({\r\n                        href: \"#popup__video-form\",\r\n                        type: 'inline',\r\n                        padding: 0,\r\n                        fitToView: false,\r\n                        tpl: {\r\n                            closeBtn: '<span class=\"lightbox-close\"></span>',\r\n                            next: '<span class=\"lightbox-next\"></span>',\r\n                            prev: '<span class=\"lightbox-prev\"></span>'\r\n                        },\r\n                        afterLoad: function(current) {\r\n                            playVideo(current.href);\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n        })();\r\n    })();\r\n\r\n    /*tea bag*/\r\n    (function () {\r\n        var $teaBag = $('#manager-message-bell');\r\n        var timer = setTimeout(showTeaBag, 10000);\r\n        //showTeaBag();\r\n\r\n        $teaBag.on('click', function (e) {\r\n            e.preventDefault();\r\n\r\n            hideTeaBag();\r\n            goToHiddenEl();\r\n        });\r\n\r\n        function showTeaBag() {\r\n            $teaBag.addClass('active');\r\n        }\r\n\r\n        function hideTeaBag() {\r\n            $teaBag.removeClass('active');\r\n        }\r\n\r\n        function goToHiddenEl() {\r\n            var $targetEl = $($teaBag.attr('data-target'));\r\n            $targetEl.removeClass('hidden');\r\n            var destination = $targetEl.offset().top;\r\n            var offset = $('.bottom-menu').height();\r\n\r\n            if (destination < 0) {\r\n                destination = 0;\r\n            }\r\n\r\n            $('html, body').animate({scrollTop: destination - offset}, \"slow\", function () {\r\n                $targetEl.addClass('active');\r\n            });\r\n        }\r\n    })();\r\n\r\n    /*Forms*/\r\n    (function () {\r\n        var $formNamePhone = $('[data-validate=\"name-phone\"]');\r\n        var $formPhone = $('[data-validate=\"phone\"]');\r\n\r\n        /*request*/\r\n        var options = {\r\n            delegation: true,\r\n            clearForm: true,\r\n            resetForm: true,\r\n            type: 'post',\r\n            /*beforeSubmit: function () {\r\n                $.fancybox.close();\r\n            },*/\r\n            success: function () {\r\n                $.fancybox({\r\n                    href: \"#popupThanks\",\r\n                    padding: 0,\r\n                    loop: false,\r\n                    tpl: {\r\n                        closeBtn: '<span class=\"lightbox-close\"></span>',\r\n                        next: '<span class=\"lightbox-next\"></span>',\r\n                        prev: '<span class=\"lightbox-prev\"></span>'\r\n                    }\r\n                });\r\n            },\r\n            error: function () {\r\n                $.fancybox({\r\n                    href: \"#popupError\",\r\n                    padding: 0,\r\n                    loop: false,\r\n                    tpl: {\r\n                        closeBtn: '<span class=\"lightbox-close\"></span>',\r\n                        next: '<span class=\"lightbox-next\"></span>',\r\n                        prev: '<span class=\"lightbox-prev\"></span>'\r\n                    }\r\n                });\r\n            }\r\n        };\r\n        $formNamePhone\r\n            .add($formPhone)\r\n            .ajaxForm(options);\r\n\r\n        $('#form1').ajaxForm(options);\r\n        $('#form2').ajaxForm(options);\r\n        $('#form3').ajaxForm(options);\r\n        $('#form4').ajaxForm(options);\r\n        $('#form5').ajaxForm(options);\r\n        $('#form6').ajaxForm(options);\r\n\r\n        /*phone mask*/\r\n        $(\"input[name=phone]:not(#uptocall-phone)\").mask(\"+7 (999) 999-99-99\");\r\n\r\n        /*validation*/\r\n        $formNamePhone.each(function(){\r\n            $(this).validate({\r\n                rules: {\r\n                    name: {required: true, maxlength: 100},\r\n                    phone: {required: true}\r\n                },\r\n                messages: {\r\n                    name: {required: \"\", maxlength: \"\"},\r\n                    phone: {required: \"\"}\r\n                }\r\n            });\r\n        });\r\n        $formPhone.each(function () {\r\n            $(this).validate({\r\n                rules: {\r\n                    phone: {required: true}\r\n                },\r\n                messages: {\r\n                    phone: {required: \"\"}\r\n                }\r\n            });\r\n        });\r\n\r\n        $(\"#form1\").validate({\r\n            rules: {\r\n                name: {required: true, maxlength: 100,},\r\n                phone: {required: true, minlength: 10, maxlength: 25,},\r\n            },\r\n            messages: {\r\n                name: {required: \"\", maxlength: \"\",},\r\n                phone: {required: \"\", maxlength: \"\",},\r\n            }\r\n        });\r\n        $(\"#form2\").validate({\r\n            rules: {\r\n                name: {required: true, maxlength: 100,},\r\n                phone: {required: true, minlength: 10, maxlength: 25,},\r\n            },\r\n            messages: {\r\n                name: {required: \"\", maxlength: \"\",},\r\n                phone: {required: \"\", maxlength: \"\",},\r\n            }\r\n        });\r\n        $(\"#form3\").validate({\r\n            rules: {\r\n                mess: {required: true, maxlength: 300,},\r\n            },\r\n            messages: {\r\n                mess: {required: \"\", maxlength: \"\",},\r\n            }\r\n        });\r\n        $(\"#form4\").validate({\r\n            rules: {\r\n                phone: {required: true, minlength: 10, maxlength: 25,},\r\n            },\r\n            messages: {\r\n                phone: {required: \"\", maxlength: \"\",},\r\n            }\r\n        });\r\n        $(\"#form5\").validate({\r\n            rules: {\r\n                name: {required: true, maxlength: 100,},\r\n                phone: {required: true, minlength: 10, maxlength: 25,},\r\n            },\r\n            messages: {\r\n                name: {required: \"\", maxlength: \"\",},\r\n                phone: {required: \"\", maxlength: \"\",},\r\n            }\r\n        });\r\n        $(\"#form6\").validate({\r\n            rules: {\r\n                name: {required: true, maxlength: 100,},\r\n                phone: {required: true, minlength: 10, maxlength: 25,},\r\n                mess: {required: true, maxlength: 300,},\r\n            },\r\n            messages: {\r\n                name: {required: \"\", maxlength: \"\",},\r\n                phone: {required: \"\", maxlength: \"\",},\r\n                mess: {required: \"\", maxlength: \"\",},\r\n            }\r\n        });\r\n\r\n        /*input type file validation*/\r\n        $('input[type=file]').change(function () {\r\n            var filename = $(this).val().replace(\"C:\\\\fakepath\\\\\", \"\");\r\n            if (filename == '') {\r\n                filename = \"(Не выбранa)\";\r\n            }\r\n            var parent = $(this).parent().parent();\r\n            $(parent).find('.fileName').html(filename);\r\n        });\r\n    })();\r\n\r\n    /*set form target*/\r\n    (function () {\r\n        var $button = $('[data-form-location]');\r\n\r\n        $button.on('click', setFormLocation);\r\n\r\n        function setFormLocation() {\r\n            var _ = $(this);\r\n            var target = _.attr('href');\r\n            var data = _.attr('data-form-location');\r\n\r\n            $(target).find('input[name=\"whatForm\"]').eq(0).val(data);\r\n        }\r\n    })();\r\n\r\n    /*Yandex map*/\r\n    (function(){\r\n        if (!document.getElementById('map')) return;\r\n\r\n        var firstScript = document.querySelectorAll('script')[0];\r\n        var script = document.createElement('script');\r\n        var placemarks = {\r\n            0: {\r\n                coords: [55.76127956896109,37.67980749999999],\r\n                hintContent: 'Оформление выписки из роддома'\r\n            }\r\n        };\r\n        var center = [55.76127956896109,37.67980749999999];\r\n        var zoom = 17;\r\n\r\n        script.src = 'https://api-maps.yandex.ru/2.1/?lang=ru_RU';\r\n        script.async = true;\r\n        firstScript.parentNode.insertBefore(script, firstScript);\r\n\r\n        script.addEventListener('load', function () {\r\n            ymaps.ready(init);\r\n        });\r\n\r\n        function init(){\r\n            var myMap = new ymaps.Map('map', {\r\n                center: center,\r\n                zoom: zoom\r\n            }, {\r\n                searchControlProvider: 'yandex#search'\r\n            });\r\n\r\n            myMap.behaviors.disable('scrollZoom');\r\n\r\n            for (var currPlacemark in placemarks) {\r\n                var placemark = new ymaps.Placemark(placemarks[currPlacemark].coords, {\r\n                    hintContent: placemarks[currPlacemark].hintContent\r\n                }, {\r\n                    iconLayout: \"default#image\",\r\n                    iconImageHref: \"./images/mark_orange.png\",\r\n                    iconImageSize: [50, 50],\r\n                    iconImageOffset: [-25, -50]\r\n                });\r\n\r\n                myMap.geoObjects.add(placemark);\r\n\r\n                placemark.events.add('click', function (e) {\r\n                    e.preventDefault();\r\n\r\n                    $.fancybox({\r\n                        href: '#popup__map',\r\n                        type: null,\r\n                        padding: 0,\r\n                        tpl: {\r\n                            closeBtn: '<span class=\"lightbox-close\"></span>',\r\n                            next: '<span class=\"lightbox-next\"></span>',\r\n                            prev: '<span class=\"lightbox-prev\"></span>'\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        }\r\n    })();\r\n\r\n    /*test*/\r\n    (function () {\r\n        var $formStep1 = $('#step1__form');\r\n        var $formStep2 = $('#step2__form');\r\n        var $formStep4 = $('#step4__form');\r\n\r\n        var $popUp = $('#popup__calculate-cost');\r\n        var $forms = $popUp.find('form');\r\n        var $steps = $popUp.find('.step');\r\n        var $stepCounters = $popUp.find('.steps__counter span');\r\n        var stepIndex = 0;\r\n        var formDataArr = [];\r\n\r\n\r\n        $popUp.on({\r\n            'resetTest': resetTest,\r\n            'submit': onSubmitValidForm\r\n        });\r\n\r\n        $formStep1.add($formStep2).on('click', 'input',  function (e) {\r\n            validate(this.closest('form'));\r\n        });\r\n\r\n        $formStep4.on('blur', 'input',  function (e) {\r\n            setTimeout(function () {\r\n                validate(this.closest('form'))\r\n            }.bind(this), 500);\r\n        });\r\n\r\n        function onSubmitValidForm(e) {\r\n            e.preventDefault();\r\n\r\n            var target = e.target;\r\n\r\n            //console.log(target);\r\n\r\n            //console.log($(target).parents('.step'));\r\n\r\n            stepIndex = $(target).parents('.step').index();\r\n\r\n            if (!validate(target)) return;\r\n\r\n            if (stepIndex === 1) {\r\n                collectFormData(target);\r\n                nextStep();\r\n                setTimeout(nextStep, 4200);\r\n            } else if (stepIndex < $steps.length - 1) {\r\n                collectFormData(target);\r\n                nextStep();\r\n            } else {\r\n                collectFormData(target);\r\n                sendRequest(target);\r\n            }\r\n        }\r\n        function validate(form) {\r\n            var valid = false;\r\n\r\n            if (stepIndex === 3) {\r\n                var phone = form.querySelector('input[name=\"phone\"]');\r\n                valid = !!phone.value;\r\n\r\n                phone.classList.remove('valid');\r\n                phone.classList.remove('error');\r\n\r\n                if (!valid) {\r\n                    phone.classList.add('error');\r\n                } else {\r\n                    phone.classList.add('valid');\r\n                }\r\n            } else {\r\n                valid = form.querySelectorAll('input:checked').length > 0;\r\n\r\n                if (!valid) {\r\n                    showError(form);\r\n                } else {\r\n                    hideError(form);\r\n                }\r\n            }\r\n\r\n            return valid;\r\n        }\r\n        function sendRequest(form) {\r\n            $.ajax({\r\n                type: form.method,\r\n                url: form.action,\r\n                data: $.param(formDataArr),\r\n                success: function () {\r\n                    $.fancybox({\r\n                        href: \"#popupThanks\",\r\n                        padding: 0,\r\n                        loop: false,\r\n                        tpl: {\r\n                            closeBtn: '<span class=\"lightbox-close\"></span>',\r\n                            next: '<span class=\"lightbox-next\"></span>',\r\n                            prev: '<span class=\"lightbox-prev\"></span>'\r\n                        }\r\n                    });\r\n                },\r\n                error: function () {\r\n                    $.fancybox({\r\n                        href: \"#popupError\",\r\n                        padding: 0,\r\n                        loop: false,\r\n                        tpl: {\r\n                            closeBtn: '<span class=\"lightbox-close\"></span>',\r\n                            next: '<span class=\"lightbox-next\"></span>',\r\n                            prev: '<span class=\"lightbox-prev\"></span>'\r\n                        }\r\n                    });\r\n                }\r\n            })\r\n        }\r\n        function collectFormData(form) {\r\n            var dataArr = $(form).serializeArray();\r\n\r\n            formDataArr = formDataArr.concat(dataArr);\r\n            //console.log(formDataArr);\r\n        }\r\n        function nextStep() {\r\n            if (stepIndex === $steps.length - 1) return;\r\n\r\n            $stepCounters.eq(stepIndex).removeClass('active');\r\n            $stepCounters.eq(stepIndex + 1).addClass('active');\r\n\r\n            $steps.eq(stepIndex).removeClass('active');\r\n            $steps.eq(stepIndex + 1).addClass('active');\r\n\r\n            stepIndex++;\r\n        }\r\n        function showError(form) {\r\n            var $error = $(form).find('.error-block');\r\n\r\n            $error.fadeIn();\r\n            /*setTimeout(function () {\r\n                $error.fadeOut();\r\n            }, 2000);*/\r\n        }\r\n        function hideError(form) {\r\n            var $error = $(form).find('.error-block');\r\n\r\n            $error.fadeOut();\r\n        }\r\n        function resetTest() {\r\n            stepIndex = 0;\r\n\r\n            $stepCounters.removeClass('active');\r\n            $stepCounters.eq(0).addClass('active');\r\n\r\n            $steps.removeClass('active');\r\n            $steps.eq(0).addClass('active');\r\n\r\n            $forms.each(function () {\r\n                this.reset();\r\n            });\r\n        }\r\n    })();\r\n\r\n    /*scroller*/\r\n    (function () {\r\n        function scrollToElement(element, offset) {\r\n            $(element).click(function (e) {\r\n                var elementClick = $(this).attr(\"href\");\r\n                var destination = $(elementClick).offset().top;\r\n                if (destination < 0) {\r\n                    destination = 0;\r\n                }\r\n                $('html, body').animate({scrollTop: destination - offset}, \"slow\");\r\n                e.preventDefault();\r\n            });\r\n        }\r\n        scrollToElement(\"a[href='#f1']\", 102);\r\n        scrollToElement(\"a[href='#f2']\", 102);\r\n        scrollToElement(\"a[href='#f3']\", 102);\r\n        scrollToElement(\"a[href='#f4']\", 102);\r\n        scrollToElement(\"a[href='#f5']\", 102);\r\n        scrollToElement(\"a[href='#f6']\", 102);\r\n        scrollToElement(\"a[href='#f7']\", 102);\r\n    })();\r\n\r\n    /*before leave page*/\r\n    /*(function () {\r\n        $(window).on('beforeunload', function (e) {\r\n            console.log(e);\r\n            console.dir(e);\r\n\r\n            return;\r\n        })\r\n    })();*/\r\n});\r\n\r\n/*global helpers*/\r\n/*some unused function*/\r\nfunction baseName(str) {\r\n    var base = new String(str).substring(str.lastIndexOf('/') + 1);\r\n    if (base.lastIndexOf(\".\") != -1)\r\n        base = base.substring(0, base.lastIndexOf(\".\"));\r\n    return base;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n"]}